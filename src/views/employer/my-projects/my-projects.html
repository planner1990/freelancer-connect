<dashboard-card :titleCard="$t('sidebar.myProjects')">
  <div class="table-dashboard temporary-table">
    <v-data-table
      :headers="headersUserManagement"
      :items="dataUserManagement"
      :page.sync="page"
      hide-default-footer
      class="elevation-1"
      @page-count="pageCount = $event"
      item-key="name"
    >
      <template v-slot:item.action="{ item , on, attrs }">
        <v-btn class="ma-2" dark small color="primary" v-bind="attrs" v-on="on">
          مشاهده خدمات نهایی
        </v-btn>
      </template>
      <template v-slot:item.numOfJobOffer="{ item }">
        <div class="d-flex justify-center align-center service-table">
          <div class="d-flex flex-column align-start px-4">
            <div class="m-0">
              {{item['number_of_proposals']}}
            </div>
          </div>
        </div>
      </template>
      <template v-slot:item.title="{ item }" class="text-right">
        <div class="d-flex align-center service-table text-right">
          <!--          <div>-->
          <!--            <img :src="item.title.src" alt="" />-->
          <!--          </div>-->
          <div class="d-flex flex-column align-start px-4">
            <!--            <v-btn class="white&#45;&#45;text" color="error" depressed small>-->
            <!--              featured-->
            <!--            </v-btn>-->
            <div class="m-0 my-1 service-table-title">{{item.title}}</div>
            <div class="m-0">
              قیمت به ریال از: <strong>{{item.price | thousandMask}}</strong>
            </div>
          </div>
        </div>
      </template>
      <template v-slot:item.description="{ item }">
        <div class="d-flex justify-center align-center service-table">
          <div class="d-flex flex-column align-start px-4">
            <div class="m-0">
              {{item.description | readMore(15, '...')}}
            </div>
          </div>
        </div>
      </template>
      <template v-slot:item.createAt="{ item }">
        <div class="d-flex justify-center align-center service-table">
          <div class="d-flex flex-column align-start px-4">
            <div class="m-0">
              {{item['created_at'] | changeDate}}
            </div>
          </div>
        </div>
      </template>
      <template v-slot:item.status="{ item }" class="service-status">
        <div class="d-flex justify-center align-center service-table">
          <div class="d-flex flex-column align-start px-4">
            <div class="m-0" v-if="item['deleted_at'] === null">
              {{item.status | myProjectStatus}}
            </div>
            <div class="m-0" v-else>
              حذف شده
            </div>
          </div>
        </div>
      </template>
      <template v-slot:item.actions="{ item }" class="service-status">
        <div class="d-flex justify-center align-center service-table">
          <div class="d-flex flex-column align-start px-4">
            <div class="m-0">
              <v-dialog
                v-model="dialog"
                max-width="300px"
                persistent
                :retain-focus="false"
              >
                <template v-slot:activator="{ on, attrs }">
                  <v-btn
                    color="primary"
                    outlined
                    v-bind="attrs"
                    v-on="on"
                    @click="getProjectId(item.id)"
                  >
                    حذف
                  </v-btn>
                </template>
                <v-form ref="form" v-model="valid" lazy-validation>
                  <v-card
                    class="d-flex flex-column justify-center align-center pb-4 send-jobOffer-freelancer"
                  >
                    <v-card-title class="justify-space-between title">
                      <span class="text-h6">حذف پروژه</span>
                      <v-btn icon @click="closeDialog">
                        <v-icon>mdi-close</v-icon>
                      </v-btn>
                    </v-card-title>
                    <v-card-text>
                      <v-container>
                        <v-row>
                          <v-col cols="12"
                            >آیا از حذف پروژه اطمینان دارید؟</v-col
                          >
                        </v-row>
                      </v-container>
                    </v-card-text>
                    <v-col cols="12">
                      <v-card-actions>
                        <v-col cols="12" md="6" sm="12" class="py-0">
                          <v-btn
                            color="secondary"
                            @click="deleteService(item.id)"
                          >
                            بله حذف شود
                          </v-btn>
                        </v-col>
                        <v-col cols="12" md="6" sm="12" class="py-0">
                          <v-btn
                            color="error"
                            class="px-10"
                            @click="closeDialog"
                          >
                            خیر
                          </v-btn>
                        </v-col>
                      </v-card-actions>
                    </v-col>
                  </v-card>
                </v-form>
              </v-dialog>
            </div>
          </div>
        </div>
      </template>
    </v-data-table>
    <div class="col-12 text-center pt-2" v-if="dataUserManagement.length >= 10">
      <v-pagination
        v-model="paginationData['current_page']"
        :length="paginationData['last_page']"
        @input="changePage($event)"
        :total-visible="paginationData.total"
      ></v-pagination>
    </div>
  </div>
</dashboard-card>
